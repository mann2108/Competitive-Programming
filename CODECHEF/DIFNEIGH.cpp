/*

Name:- Mann Mehta
Codechef Id:- mann2108

Problem Code:- DIFNEIGH

*/

#include<bits/stdc++.h>

using namespace std ;
typedef long long int ll;

int main(){

    ll t;
    cin>>t;

    while(t--){

        ll m,n;
        cin>>m>>n;

        if(n==2 && m==2){
            cout<<"2"<<endl;
            cout<<"1 1\n2 2"<<endl;
        }


        else if(m==1 || n==1){

            if(m==1){
                ll a[1][50]={{1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1}};
                ll max=0;
                for(ll i=0;i<n;i++){
                    if(max<a[0][i]){
                        max=a[0][i];
                    }
                }
                cout<<max<<endl;
                for(ll j=0;j<n;j++){
                    cout<<a[0][j]<<" ";
                }
                cout<<endl;
            }
            else{
                ll a[1][50]={{1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1}};
                ll max=0;
                for(ll i=0;i<m;i++){
                    if(max<a[0][i]){
                        max=a[0][i];
                    }
                }
                cout<<max<<endl;
                for(ll i=0;i<m;i++){
                    cout<<a[0][i]<<endl;
                }
            }
        }

        else if(m==2){
            ll a[2][50]={{1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1},
                         {2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3}};
            ll max=0;
            for(ll i=0;i<m;i++){
                for(ll j=0;j<n;j++){
                    if(max<a[i][j]){
                        max=a[i][j];
                    }
                }
            }
            cout<<max<<endl;
            for(ll i=0;i<m;i++){
                for(ll j=0;j<n;j++){
                    cout<<a[i][j]<<" ";
                }
                cout<<endl;
            }
        }
        else if(n==2){
            ll a[2][50]={{1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1},
                         {2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3,3,1,1,2,2,3}};
            ll max=0;
            for(ll i=0;i<m;i++){
                for(ll j=0;j<n;j++){
                    if(max<a[j][i]){
                        max=a[j][i];
                    }
                }
            }
            cout<<max<<endl;
            for(ll i=0;i<m;i++){
                for(ll j=0;j<n;j++){
                    cout<<a[j][i]<<" ";
                }
                cout<<endl;
            }
        }

        else{
         ll a[50][50]={{1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1},
                       {2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3},
                       {2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4},
                       {3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2},
                       {3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3},
                       {4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1},
                       {4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2},
                       {1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4},
                       {1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1},
                       {2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3},
                       {2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4},
                       {3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2},
                       {3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3},
                       {4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1},
                       {4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2},
                       {1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4},
                       {1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1},
                       {2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3},
                       {2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4},
                       {3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2},
                       {3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3},
                       {4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1},
                       {4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2},
                       {1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4},
                       {1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1},
                       {2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3},
                       {2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4},
                       {3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2},
                       {3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3},
                       {4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1},
                       {4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2},
                       {1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4},
                       {1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1},
                       {2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3},
                       {2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4},
                       {3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2},
                       {3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3},
                       {4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4,4,1},
                       {4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1,2,2},
                       {1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3,3,4},
                       {1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4,1,1},
                       {2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2,2,3},
                       {2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3,4,4},
                       {3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1,1,2},
                       {3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2,3,3},
                       {4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4,4,1},
                       {4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1,2,2},
                       {1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,3,4},
                       {1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,1},
                       {2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3,1,2,4,1,3,4,2,3},


                       };
            ll max=4;
            cout<<max<<endl;
            for(ll i=0;i<m;i++){
                for(ll j=0;j<n;j++){
                    cout<<a[i][j]<<" ";
                }
                cout<<endl;
            }
        }
    }
}